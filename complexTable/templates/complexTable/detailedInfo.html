{% load staticfiles %}

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Home - LigMol</title>
    <meta name="description" content="A simple complex database">
    <link rel="stylesheet" href="{% static 'complexTable/bootstrap/bootstrap.min.css' %}">
    <link rel="shortcut icon" type="image/png" href="{% static 'complexTable/img/favicon.ico' %}"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cabin:700">
    <link rel="stylesheet" href="{% static 'complexTable/fonts/font-awesome.min.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'complexTable/custom.css' %}">
    <script src="{% static 'complexTable/js/sorttable.js' %}"></script>
</head>

<body id="page-top">
    <nav class="navbar navbar-light navbar-expand-md navbar navbar-expand-lg fixed-top" id="mainNav" style="background-color: #829eaa;">
        <div class="container"><a class="navbar-brand js-scroll-trigger" href="{% url 'complexTable:index' %}">LigMol</a><button class="navbar-toggler navbar-toggler-right" data-toggle="collapse" data-target="#navbarResponsive" type="button" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"
                value="Menu"><i class="fa fa-bars"></i></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item nav-link js-scroll-trigger pointer" role="presentation"><a class="nav-link js-scroll-trigger" onclick="location.href='{% url 'complexTable:index' %}' + '#home'">Home</a></li>
                    <li class="nav-item nav-link js-scroll-trigger pointer" role="presentation"><a class="nav-link js-scroll-trigger" onclick="location.href='{% url 'complexTable:index' %}' + '#about'">About</a></li>
                    <li class="nav-item nav-link js-scroll-trigger pointer" role="presentation"><a class="nav-link js-scroll-trigger" onclick="location.href='{% url 'complexTable:index' %}' + '#contact'">contact</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <section id="home" >

        <div style='margin-top:90;'></div>
        <br/>
        <section class="content-section-small">
                <div class="row">
                        <div class="col-md-4 col-sm-12 panel panel-default text-center">
                            <input value="Return" type="button" onclick="location.href='{% url 'complexTable:complexTable' %}'" class="btn"></input>
                        </div>
                        <div class="col-md-4 col-sm-12">
                            <div class="panel panel-default text-center" id="ligandNgl">
                                <script src="https://unpkg.com/ngl"></script>
                                <script>
                                    var loadFileUrl = "{% static 'data/mols/CFF.cif' %}";
                                    document.addEventListener("DOMContentLoaded", function() {
                                        function e() {
                                            return d ? "not _h and " + r : r
                                        }

                                        function t(e, t) {
                                            var n = !1;
                                            return e.getView(new NGL.Selection(t)).eachAtom(function(e) {
                                                (isNaN(e.x) || isNaN(e.y) || isNaN(e.z)) && (n = !0)
                                            }), n
                                        }

                                        function n() {
                                            f ? u.setSpin(null) : u.setSpin([0, 1, 0], .01), f = !f
                                        }

                                        function i() {
                                            l.setVisibility(!s), s = !s
                                        }

                                        function o() {
                                            c.setSelection(e()), d = !d
                                        }
                                        var l, a, c, d = !0,
                                            s = !0,
                                            r = "/0",
                                            u = new NGL.Stage("viewport", {
                                                backgroundColor: "white",
                                                clipDist: 1
                                            });
                                        u.loadFile(loadFileUrl).then(function(n) {
                                            r = t(n.structure, "/0") ? "/1" : "/0", c = n, c.setSelection(e()), a = n.addRepresentation("ball+stick", {
                                                multipleBond: "symmetric"
                                            }), l = n.addRepresentation("label", {
                                                labelType: "atomname",
                                                color: "black",
                                                fontWeight: "bold ",
                                                xOffset: .1,
                                                yOffset: .1,
                                                radius: 1.4
                                            }), i(), o(), u.autoView(1)
                                        });
                                        var f = !1;
                                        n(), document.getElementById("nglRotateBtn").addEventListener("click", n), document.getElementById("nglLabelsBtn").addEventListener("click", i), document.getElementById("nglHydrogensBtn").addEventListener("click", o)
                                    });
                                </script>
                                <div id="viewport" style="width: 100%; height: 300px; margin-left: 5px; margin-right: 5px; overflow: hidden;">
                                    <div style="display: none; position: fixed; z-index: 1000000; pointer-events: none; background-color: rgba(0, 0, 0, 0.6); color: lightgrey; padding: 8px; font-family: sans-serif; bottom: 603px; left: 1007px;">atom: [CFF]1.N1/0 (CFF.cif)</div>
                                </div>
                                <div class="text-center">
                                    <a class="btn btn-xs btn-default" id="nglRotateBtn">Rotate</a>
                                    <a class="btn btn-xs btn-default" id="nglHydrogensBtn">Hydrogens</a>
                                    <a class="btn btn-xs btn-default" id="nglLabelsBtn">Labels</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12">
                            <!-- Single button-->
                            {% for key, val in info.items %}
                                {% if key|lower == "complex" %}
                                    <h1 id="complex">{{ val }}</h1>
                                {% elif key|lower != "id" %}
                                    <p class="text-left">{{ key }}: {{ val }}</p>
                                {% endif %}
                            {% endfor %}
                            <input value="Download" type="button" onclick="window.open('download?id={{ bigID }}')" class="btn"></input>
                        </div>
                    </div>
        </section>
    <footer>
        <div class="container text-center">
            <p>Copyright Â©&nbsp;LigMol 2018</p>
        </div>
    </footer>
    <script src="{% static 'complexTable/js/jquery.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script src="{% static 'complexTable/js/grayscale.js' %}"></script>
    <script src="{% static 'complexTable/js/particles.min.js' %}"></script>
    <script src="{% static 'complexTable/js/ligmol.js' %}"></script>
</body>

</html>